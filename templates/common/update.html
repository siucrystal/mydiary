{% extends 'base.html' %}

{% load custom_date %}
{% load diary_filter %}
{% load static %}
{% block content %}
<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
<link rel="stylesheet" href="{% static 'css/common/login.css' %}">

<main>
    <div class="container">
        <div class="login_box">
            <div class="login_title">회원 정보 수정</div>
            <div class="login_form">
                <form method="post" action="">
                    {% csrf_token %}
                    {% include "form_errors.html" %}
                    ID [ {{ user.username }} ]
                    <div class="mb-3">
                        <label for="first_name">성</label>
                        <input placeholder="First Name" type="first_name" class="form-control" name="first_name" id="first_name"
                               value="{{ user.first_name }}">
                    </div>
                    <div class="mb-3">
                        <label for="last_name">이름</label>
                        <input placeholder="Last Name" type="last_name" class="form-control" name="last_name" id="last_name"
                               value="{{ user.last_name }}">
                    </div>
                    <div class="mb-3">
                        <label for="email">이메일</label>
                        <input placeholder="Email" type="text" class="form-control" name="email" id="email"
                               value="{{ user.email }}">
                    </div>
                    <button type="submit" class="submit">수정하기</button>
                    <div class="ext_login">
                        <span class="login_css_text">
                            <a href="{% url 'common:modify_password' %}">비밀번호 수정</a>  
                            <a href="{% url 'common:delete' %}" id="delete">회원탈퇴</a>
                        </span>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>


{% endblock %}
{% block script %}
<script type='text/javascript'>
    const deleteForm = document.getElementById("delete");
    if (deleteForm) {
        deleteForm.addEventListener('click', function(event) {
            event.preventDefault(); // 폼 제출 기본 동작 방지
            if (confirm("정말로 탈퇴 하시겠습니까?")) {l
                window.location.href = this.href;
            };
        });
    }

</script>
{% endblock %}